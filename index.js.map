{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = 'https://pixabay.com/api/';\nconst API_KEY = '52251600-fd545eaf39516c2667db2508b';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getImagesByQuery(query, page) {\n  const response = await axios.get('', {\n    params: {\n      key: API_KEY,\n      q: query,\n      page,\n      per_page: 15,\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: true,\n    },\n  });\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst galleryListEl = document.querySelector(`.gallery`);\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nconst gallery = new SimpleLightbox('.gallery a', {\n  captionsData: 'alt',\n  captionPosition: 'bottom',\n  captions: true,\n  captionDelay: 250,\n});\n\nexport function createGallery(images) {\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n          <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n            <div class=\"card\">\n          <ul class=\"card-list\">\n            <li class=\"card-item\">Likes<p class=\"text\">${likes}</p></li>\n            <li class=\"card-item\">Views <p class=\"text\">${views}</p></li>\n            <li class=\"card-item\">Comments <p class=\"text\">${comments}</p> </li>\n            <li class=\"card-item\">Downloads <p class=\"text\">${downloads}</p></li>\n          </ul>\n        </div>\n          </a>\n        </li>`;\n      }\n    )\n    .join('');\n\n  galleryListEl.insertAdjacentHTML('beforeend', markup);\n  gallery.refresh();\n}\n\nexport function clearGallery() {\n  galleryListEl.innerHTML = '';\n}\n\nexport function showLoader() {\n  loader.classList.remove('is-hidden');\n}\n\nexport function hideLoader() {\n  loader.classList.add('is-hidden');\n}\n\nexport function showLoadMoreButton() {\n  loadMoreBtn.classList.remove('is-hidden');\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.classList.add('is-hidden');\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImagesByQuery } from './js/pixabay-api';\nimport {\n  createGallery,\n  clearGallery,\n  showLoader,\n  hideLoader,\n  showLoadMoreButton,\n  hideLoadMoreButton,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet page = 1;\nconst perPage = 15;\nlet inputQuery = null;\n\nformEl.addEventListener('submit', handleFormSubmit);\nloadMoreBtn.addEventListener('click', handleClick);\n\nasync function handleFormSubmit(event) {\n  event.preventDefault();\n  page = 1;\n  hideLoadMoreButton();\n  clearGallery();\n  showLoader();\n\n  inputQuery = event.currentTarget.elements['search-text'].value.trim();\n\n  if (!inputQuery) {\n    iziToast.warning({\n      message: 'Please enter a search term!',\n      position: 'topRight',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      icon: '',\n    });\n    return;\n  }\n\n  try {\n    const res = await getImagesByQuery(inputQuery, page);\n\n    if (res.hits.length === 0) {\n      iziToast.error({\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        messageColor: '#fff',\n        backgroundColor: '#ef4040',\n        icon: '',\n      });\n      return;\n    }\n\n    createGallery(res.hits);\n    setTimeout(scrollPage, 0);\n\n    if (res.totalHits > perPage) {\n      showLoadMoreButton();\n    }\n  } catch (error) {\n    console.log(error);\n    iziToast.error({\n      position: 'topRight',\n      message: 'Something went wrong. Please try again!',\n      messageColor: '#fff',\n      backgroundColor: '#ef4040',\n      icon: '',\n    });\n  } finally {\n    hideLoader();\n    formEl.reset();\n  }\n}\n\nasync function handleClick() {\n  showLoader();\n  page += 1;\n\n  try {\n    const res = await getImagesByQuery(inputQuery, page);\n    createGallery(res.hits);\n    scrollPage();\n\n    const lastPage = Math.ceil(res.totalHits / perPage);\n\n    if (page === lastPage) {\n      hideLoadMoreButton();\n      iziToast.info({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        messageColor: '#fff',\n        backgroundColor: '#59a10d',\n        position: 'bottomRight',\n        icon: '',\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    hideLoader();\n  }\n}\n\nfunction scrollPage() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    requestAnimationFrame(() => {\n      window.scrollBy({\n        top: itemHeight * 2,\n        behavior: 'smooth',\n      });\n    });\n  }\n}\n"],"names":["BASE_URL","API_KEY","axios","getImagesByQuery","query","page","galleryListEl","loader","loadMoreBtn","gallery","SimpleLightbox","createGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","formEl","perPage","inputQuery","handleFormSubmit","handleClick","event","iziToast","res","scrollPage","error","lastPage","galleryItem","itemHeight"],"mappings":"owBAEA,MAAMA,EAAW,2BACXC,EAAU,qCAEhBC,EAAM,SAAS,QAAUF,EAElB,eAAeG,EAAiBC,EAAOC,EAAM,CAYlD,OAXiB,MAAMH,EAAM,IAAI,GAAI,CACnC,OAAQ,CACN,IAAKD,EACL,EAAGG,EACH,KAAAC,EACA,SAAU,GACV,WAAY,QACZ,YAAa,aACb,WAAY,EACb,CACL,CAAG,GACe,IAClB,CCjBA,MAAMC,EAAgB,SAAS,cAAc,UAAU,EACjDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,YAAY,EAEjDC,EAAU,IAAIC,EAAe,aAAc,CAC/C,aAAc,MACd,gBAAiB,SACjB,SAAU,GACV,aAAc,GAChB,CAAC,EAEM,SAASC,EAAcC,EAAQ,CACpC,MAAMC,EAASD,EACZ,IACC,CAAC,CACC,aAAAE,EACA,cAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACR,IACe;AAAA,0CAC2BL,CAAa;AAAA,8CACTD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA,yDAGfC,CAAK;AAAA,0DACJC,CAAK;AAAA,6DACFC,CAAQ;AAAA,8DACPC,CAAS;AAAA;AAAA;AAAA;AAAA,cAMlE,EACA,KAAK,EAAE,EAEVd,EAAc,mBAAmB,YAAaO,CAAM,EACpDJ,EAAQ,QAAO,CACjB,CAEO,SAASY,GAAe,CAC7Bf,EAAc,UAAY,EAC5B,CAEO,SAASgB,GAAa,CAC3Bf,EAAO,UAAU,OAAO,WAAW,CACrC,CAEO,SAASgB,GAAa,CAC3BhB,EAAO,UAAU,IAAI,WAAW,CAClC,CAEO,SAASiB,GAAqB,CACnChB,EAAY,UAAU,OAAO,WAAW,CAC1C,CAEO,SAASiB,GAAqB,CACnCjB,EAAY,UAAU,IAAI,WAAW,CACvC,CCrDA,MAAMkB,EAAS,SAAS,cAAc,MAAM,EACtClB,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIH,EAAO,EACX,MAAMsB,EAAU,GAChB,IAAIC,EAAa,KAEjBF,EAAO,iBAAiB,SAAUG,CAAgB,EAClDrB,EAAY,iBAAiB,QAASsB,CAAW,EAEjD,eAAeD,EAAiBE,EAAO,CASrC,GARAA,EAAM,eAAc,EACpB1B,EAAO,EACPoB,IACAJ,IACAC,IAEAM,EAAaG,EAAM,cAAc,SAAS,aAAa,EAAE,MAAM,OAE3D,CAACH,EAAY,CACfI,EAAS,QAAQ,CACf,QAAS,8BACT,SAAU,WACV,aAAc,OACd,gBAAiB,UACjB,KAAM,EACZ,CAAK,EACD,MACD,CAED,GAAI,CACF,MAAMC,EAAM,MAAM9B,EAAiByB,EAAYvB,CAAI,EAEnD,GAAI4B,EAAI,KAAK,SAAW,EAAG,CACzBD,EAAS,MAAM,CACb,QACE,2EACF,SAAU,WACV,aAAc,OACd,gBAAiB,UACjB,KAAM,EACd,CAAO,EACD,MACD,CAEDrB,EAAcsB,EAAI,IAAI,EACtB,WAAWC,EAAY,CAAC,EAEpBD,EAAI,UAAYN,GAClBH,GAEH,OAAQW,EAAO,CACd,QAAQ,IAAIA,CAAK,EACjBH,EAAS,MAAM,CACb,SAAU,WACV,QAAS,0CACT,aAAc,OACd,gBAAiB,UACjB,KAAM,EACZ,CAAK,CACL,QAAY,CACRT,IACAG,EAAO,MAAK,CACb,CACH,CAEA,eAAeI,GAAc,CAC3BR,IACAjB,GAAQ,EAER,GAAI,CACF,MAAM4B,EAAM,MAAM9B,EAAiByB,EAAYvB,CAAI,EACnDM,EAAcsB,EAAI,IAAI,EACtBC,IAEA,MAAME,EAAW,KAAK,KAAKH,EAAI,UAAYN,CAAO,EAE9CtB,IAAS+B,IACXX,IACAO,EAAS,KAAK,CACZ,QAAS,6DACT,aAAc,OACd,gBAAiB,UACjB,SAAU,cACV,KAAM,EACd,CAAO,EAEJ,OAAQG,EAAO,CACd,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRZ,GACD,CACH,CAEA,SAASW,GAAa,CACpB,MAAMG,EAAc,SAAS,cAAc,eAAe,EAC1D,GAAIA,EAAa,CACf,MAAMC,EAAaD,EAAY,sBAAqB,EAAG,OACvD,sBAAsB,IAAM,CAC1B,OAAO,SAAS,CACd,IAAKC,EAAa,EAClB,SAAU,QAClB,CAAO,CACP,CAAK,CACF,CACH"}